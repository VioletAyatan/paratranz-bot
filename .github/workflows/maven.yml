# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI with Maven

# 触发此工作流的事件
on:
  push:
    branches: [ master ]

# 执行的操作
jobs:
  build:
    #    构建操作执行的机器
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      # Setup java environment...
      - name: Setup java environment
        uses: actions/setup-java@v2
        with:
          java-version: '11'
          distribution: 'adopt'
          cache: maven
      # Build with maven...
      - name: Build with Maven
        run: mvn -B package -D skipTests --file pom.xml
      # list dir...
      - run: ls target
      # deploy...
      - name: SSH deploy
        uses: easingthemes/ssh-deploy@v2.2.11
        with:
          SOURCE: "target/tranzai.jar"
          SSH_PRIVATE_KEY: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC4G5GCFEFtJcJQLh1oeEVxV9BplLVym+BFdR+kkCYrdNl8IOS2eDwzFGAANihQZNCrZ27wtBezCotDFZDVa3nTAqcQr61K2H+rdQveo+nU0+V58fZfWHMFzoENLgWnFSg3R4Kx89PF6Osd6J6Rt3lplVLxQNO+3pedj6ZCa0im1r7yKn/DNlMZY/NIlyUMf4wpD91UPQNZcJuXSf+5y0Kvn+3o2Th5U8gnL+G9npEoGMYn/P4XknyUl1Q5YWfhQeEODhSPotqRt5C5Sai4MGrfHpGyTwS6Puq1kuvinO7A1eNXaTgQI+o9qgSoACpRz7GZy2MkmG2lJoU9Xma6ei/eaY8hC/Z8CvGSiFos6JUJhxveby2lQSDZPFBbiWd84PF05uUBbs0rEQMm/YDNIuR9smCI2ZpQaRFy0w3W2XaAT5uLmoSeY6vBeLIRqKT0qKlzwPB0R5jywroediUctFYqLD8L5dn5y07J2YqJIj3OEivjUp7f8v0xV5PnwnJGwW0= lichengkun@csrd.cn
          REMOTE_HOST: 121.5.179.246
          REMOTE_USER: root
          TARGET: /opt/tranzai


